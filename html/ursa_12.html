<div class="container">

<table style="width: 100%;"><tr>
<td>panel_coastline</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>
Add coastline to the image panel.
</h2>

<h3>Description</h3>

<p><code>panel_coastline</code> puts a coastline to the active panel of layout with optional land shadowing. The package provides data for coastline.
</p>


<h3>Usage</h3>

<pre><code class="language-R">compose_coastline(...)

panel_coastline(...)

update_coastline(merge = TRUE)

# not public
.compose_coastline(obj = NULL, panel = 0, col = NA, fill = "transparent",
                    detail = NA, density = NA, angle = NA, land = FALSE,
                    lwd = 0.5, lty = 1, fail180 = NA, verbose = FALSE)

# not public
.panel_coastline(obj, verbose = FALSE)

</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>Set of arguments, which are recognized via their names (using regular expressions) and classes:
</p>

<table>
<tr>
<td style="text-align: left;">
          <em>Matched pattern</em> </td>
<td style="text-align: left;"> <em>Used name</em> </td>
<td style="text-align: left;"> <em>Description</em>
          </td>
</tr>
<tr>
<td style="text-align: left;">
<code>coast(line)*</code> </td>
<td style="text-align: left;">  </td>
<td style="text-align: left;">
          Logical or integer. Responsible for should coastline be displayed or not. If integer, the indicates panel index for coastline displaying. If <code>TRUE</code> then coastline is plotted. If <code>FALSE</code> then coastline is not displayed. Default is <code>TRUE</code>.
          </td>
</tr>
<tr>
<td style="text-align: left;">
<code>(obj)*</code> </td>
<td style="text-align: left;"> <code>obj</code> </td>
<td style="text-align: left;"> <em>See below.</em>
          </td>
</tr>
<tr>
<td style="text-align: left;">
<code>panel</code> </td>
<td style="text-align: left;"> <code>panel</code> </td>
<td style="text-align: left;"> <em>See below.</em>
          </td>
</tr>
<tr>
<td style="text-align: left;">
<code>fill</code> </td>
<td style="text-align: left;"> <code>fill</code> </td>
<td style="text-align: left;"> <em>See below.</em>
          </td>
</tr>
<tr>
<td style="text-align: left;">
<code>detail</code> </td>
<td style="text-align: left;"> <code>detail</code> </td>
<td style="text-align: left;"> <em>See below.</em>
          </td>
</tr>
<tr>
<td style="text-align: left;">
<code>density</code> </td>
<td style="text-align: left;"> <code>density</code> </td>
<td style="text-align: left;"> <em>See below.</em>
          </td>
</tr>
<tr>
<td style="text-align: left;">
<code>angle</code> </td>
<td style="text-align: left;"> <code>angle</code> </td>
<td style="text-align: left;"> <em>See below.</em>
          </td>
</tr>
<tr>
<td style="text-align: left;">
<code>land</code> </td>
<td style="text-align: left;"> <code>land</code> </td>
<td style="text-align: left;"> <em>See below.</em>
          </td>
</tr>
<tr>
<td style="text-align: left;">
<code>lwd</code> </td>
<td style="text-align: left;"> <code>lwd</code> </td>
<td style="text-align: left;"> <em>See below.</em>
          </td>
</tr>
<tr>
<td style="text-align: left;">
<code>lty</code> </td>
<td style="text-align: left;"> <code>lty</code> </td>
<td style="text-align: left;"> <em>See below.</em>
          </td>
</tr>
<tr>
<td style="text-align: left;">
<code>fail180</code> </td>
<td style="text-align: left;"> <code>fail180</code> </td>
<td style="text-align: left;"> <em>See below.</em>
          </td>
</tr>
<tr>
<td style="text-align: left;">
<code>verb(ose)*</code> </td>
<td style="text-align: left;"> <code>verbose</code> </td>
<td style="text-align: left;"> <em>See below.</em>
      </td>
</tr>
</table>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>obj</code></td>
<td>
<p>Objects of the one of the classes <code>Spatial</code>, <code>sfc</code>, <code>ursaCoastLine</code>. The last one is internal structure, which is returned by function <code>.compose_coastline</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>panel</code></td>
<td>
<p>Integer vector. Panel for which coastline will be displayed. <code>0L</code> means that coastline will bw displayed for all panels. Default is <code>0L</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>Character. Color code/name for coastline. Default is <code>"grey60"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>Character. Color code/name for land masking/shadowing. Default is <code>"transapent"</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>detail</code></td>
<td>
<p>Character keyword. The categorical spatial resolution for coastline. Valid values are <code>"l"</code> (low), <code>"m"</code> (medium), <code>"h"</code> (high), <code>"f"</code> (full). If value is <code>NA</code>, then coasline resolution is selected internally. Default is <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>density</code></td>
<td>
<p>Numeric. The density of shading lines for land masking/shadowing. If <code>NA</code> then no shading lines are drawn. Default is <code>NA</code>. See <code>density</code> in <code>polygon</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle</code></td>
<td>
<p>Numeric. The slope of shading lines, given as an angle in degrees (counter-clockwise). If <code>NA</code> then no shading lines are drawn. Default is <code>NA</code>. See <code>angle</code> in <code>polygon</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>land</code></td>
<td>
<p>Logical. If <code>TRUE</code> then map's accent is to land, and ocean is masked/shadowed. If <code>FALSE</code> then map's accent is to ocean, and land is masked/shadowed. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>Positive numeric. Width of coastline. Default is <code>1</code>. See <code>lwd</code> in <code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p>Positive integer. Type (pattern) of coastline. Default is <code>1L</code> (solid). See <code>lty</code> in <code>par</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fail180</code></td>
<td>
<p>Logical. Patch for correct plotof polygons crossing 180 degree longitude. <code>NA</code> means than decision is taken intuitively. <code>TRUE</code> forces to implement crossing og 180 degree longitude. <code>FALSE</code> forces to not implement crossing og 180 degree longitude. Default is <code>NA</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>verbose</code></td>
<td>
<p>Logical. Value <code>TRUE</code> may provide some additional information on console. Default is <code>FALSE</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>merge</code></td>
<td>
<p>Logical. Ingored.</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p><code>compose_coastline</code> forms an obect of class <code>ursaCoastLine</code>. <code>panel_coastline</code> displays object of class <code>ursaCoastLine</code>. It is expected higher performance for multi-panel plotting.
</p>
<p>If <code>obj</code> is <code>NULL</code>, then internal data is used. This data is based on simplified polygons of <a href="https://osmdata.openstreetmap.de/data/land-polygons.html">OpenStreetMap-derived data</a>. Source data is <a href="https://osmdata.openstreetmap.de/info/license.html">licensed</a> under the Open Data Commons Open Database License (ODbL). The crossing longitude 180 degrees polygons are merged. Removing of small polygons and simplifying of polygons geometry is applied for three levels of details (<code>"l"</code> - low, <code>"i"</code> - interim, <code>"h"</code> - high). For the full (<code>"f"</code>) level of details data simplification is not applied.
</p>
<p>Coastline data are taken from directory, which is specified by <code>getOption("ursaRequisite")</code> with default value <code>system.file("requisite",package="ursa")</code>. Package contains data of <code>"l"</code> (low) details level in the file <code>system.file("requisite/coast-l.rds",package="ursa")</code>. Data of higher levels can be added using <code>update_coastline()</code> function. It is required to specify user's requisite path using <code>options(ursaRequisite=path/to/user/files)</code> before loading <span class="pkg">ursa</span>, e.g. in the user's <code>~/.Rprofile</code> file. Otherwise, there is a chance that data can not be updated due to 'permission deny' of the system directories. Package <span class="pkg">sf</span> and some it's suggestions are required for data update.
</p>
<p>If <code>detail=NA</code> then the spatial resolution is selected using CRS boundary and resolution using intuitive approach. If package's database cannot supply required details, then lower resolution is used.
</p>
<p>Source coastline data in EPSG:4326 are transformed to CRS projection, extracted using <code>session_grid</code> function. Coastlines with optional filling of either land or ocean area is interpreted as polygons. If filling is solid (there is no transparency or shading lines (numerical values of arguments <code>density</code> and <code>angle</code>), then coastline plotting is imlemented via <code>polypath</code> function, otherwise  <code>polygon</code> function.
</p>


<h3>Value</h3>

<p><code>panel_coastline</code> returns <code>NULL</code>
</p>
<p><code>compose_coastline</code> returns of object of class <code>ursaCoastLine</code>. It is a list:
</p>
<table>
<tr style="vertical-align: top;">
<td><code>coast_xy</code></td>
<td>
<p>Two-column matix of coordinates in the sessional projection. The polygons are separated by <code>c(NA,NA)</code> rows.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>panel</code></td>
<td>
<p>Integer. Panel for coastline displaying. If <code>0L</code>, then coastline is displayed on each panel.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>col</code></td>
<td>
<p>See description of argument <code>col</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>fill</code></td>
<td>
<p>See description of argument <code>fill</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>shadow</code></td>
<td>
<p>If filling is semi-transparent, then it is "alpha" of filling color (argument <code>fill</code>).</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>land</code></td>
<td>
<p>See description of argument <code>land</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>density</code></td>
<td>
<p>See description of argument <code>density</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>angle</code></td>
<td>
<p>See description of argument <code>angle</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lwd</code></td>
<td>
<p>See description of argument <code>lwd</code>.</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>lty</code></td>
<td>
<p>See description of argument <code>lty</code>.</p>
</td>
</tr>
</table>
<h3>License</h3>

<p>Coastal data (land polygons) is distributed under ODbL.
</p>


<h3>Note</h3>

<p>In the versions &lt;=3.7-19 package <span class="pkg">ursa</span> contained land polygons based on union of "GSHHS_l_L1.shp" and "GSHHS_l_L5.shp" data from Self-consistent Hierarchical High-resolution Geography Database (<a href="https://www.soest.hawaii.edu/pwessel/gshhg/">GSHHG</a>), Version 2.3.3 (01 November 2014), distributed under the Lesser GNU Public License, Version 3 (29 June 2007). 
</p>


<h3>Author(s)</h3>

<p>Nikita Platonov <a href="mailto:platonov@sevin.ru">platonov@sevin.ru</a>
</p>


<h3>Examples</h3>

<pre><code class="language-R">session_grid(NULL)
a &lt;- pixelsize()
p1 &lt;- colorize(a[a&gt;500],ramp=FALSE,interval=TRUE)
p2 &lt;- colorize(a,ramp=FALSE,pal=colorRampPalette(c("grey40","grey100"))
              ,verbose=!TRUE,interval=TRUE)
compose_open(layout=c(2,2),legend=list(list(1,"right"),list(2,"left")))
for (i in 1:4) {
   panel_new(col=ifelse(i==2,"white",NA))
   if (i %in% c(3,4))
      panel_raster(p1)
   else if (i %in% 2)
      panel_raster(p2)
   if (i==1)
      panel_coastline()
   panel_coastline(coast=4,col="#007F00",fill="lightgreen",land=TRUE)
   panel_coastline(coast=3,col="#0000003F",fill="#0000003F")
   panel_coastline(coast=2,col="black",fill="black",density=20
                   ,angle=c(-45,45),lwd=0.25,detail="l")
  # panel_graticule(decor=4)
   panel_annotation(text=as.character(i))
   if (i==1)
      panel_annotation(pos=c(1,1),text="default")
   else if (i==2)
      panel_annotation(pos=c(0,1),text="greyscale")
   else if (i==3)
      panel_annotation(pos=c(1,1),text="land is shadowed")
   else if (i==4)
      panel_annotation(pos=c(0,1),text="ocean is masked")
}
compose_legend(p2,p1)
compose_close()
</code></pre>


</div>