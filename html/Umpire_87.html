<div class="container">

<table style="width: 100%;"><tr>
<td>EngineWithActivity-class</td>
<td style="text-align: right;">R Documentation</td>
</tr></table>
<h2>The "EngineWithActivity" Class</h2>

<h3>Description</h3>

<p>The <code>EngineWithActivity</code> is used to set some components in the object
of class <code>Engine</code> to be transcriptionally inactive and transform the
expression data to appropriate logarithmic scale.
</p>


<h3>Usage</h3>

<pre><code class="language-R">EngineWithActivity(active, components, base=2)
## S4 method for signature 'EngineWithActivity'
rand(object, n, ...)
## S4 method for signature 'EngineWithActivity'
summary(object, ...)
</code></pre>


<h3>Arguments</h3>

<table>
<tr style="vertical-align: top;">
<td><code>active</code></td>
<td>
<p>logical vector with length equal to number of components
specifying whether each component should be transcriptionally active, or
a numeric scalar specifying the probability for a component to be active</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>components</code></td>
<td>
<p>list where each element contains the parameters for the
underlying distribution that the gene expression follows</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>base</code></td>
<td>
<p>numeric scalar specifying the logarithmic scale to which the
data should be transformed</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>object</code></td>
<td>
<p>object of class <code>EngineWithActivity</code></p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>n</code></td>
<td>
<p>number of samples to be simulated</p>
</td>
</tr>
<tr style="vertical-align: top;">
<td><code>...</code></td>
<td>
<p>extra arguments for generic routines</p>
</td>
</tr>
</table>
<h3>Details</h3>

<p>An ENGINE WITH ACTIVITY allows for the possibility that some
components (or genes) in an expression engine (or tissue) might be
transcriptionally inactive.  Thus, the true biological signal
S_gi should really be viewed as a mixture:
</p>
<p><code class="reqn">S_gi = z_g * delta_0 + (1 - z_g) * T_gi</code>
</p>
<p>where delta_0 = a point mass at zero;   
T_gi = a random variable supported on the positive real line;   
z_g ~ Binom(pi) defines the activity state (1 = on, 0 = off)
</p>
<p>The <code>rand</code> method for an EngineWithActivity is a little bit
tricky, since we do two things at once. First, we use the
<code>base</code> slot to exponentiate the random variables generated by
the underlying Engine on the log scale. We treat <code>base = 0</code> as
a special case, which means that we should continue to work on
the scale of the Engine. Second, we mask any inactive component
by replacing the generated values with <code>0</code>.
</p>
<p>Note that this is terribly inefficient if we only have a single
homogeneous population, since we generate a certain amount of
data only to throw it away.  The power comes when we allow
cancer disregulation to turn a block on or off, when the
underlying data reappears.
</p>


<h3>Value</h3>

<p>The <code>EngineWithActivity</code> generator returns an object of class
<code>EngineWithActivity</code>.
</p>
<p>The <code>rand</code> method returns <code class="reqn">nrow(EngineWithActivity)*n</code> gene
expression matrix with the inactive components being masked by <code>0</code>.
</p>
<p>The <code>summary</code> method prints out the total number of components and
the number of active components in the object of <code>EngineWithActivity</code>.
</p>


<h3>Objects from the Class</h3>

<p>Although objects of the class can be created by a direct call to
new, the preferred method is to use the
<code>EngineWithActivity</code> generator function.
</p>


<h3>Slots</h3>


<dl>
<dt>
<code>active</code>:</dt>
<dd>
<p>logical vector specifying whether each component
should be transcriptionally active or not</p>
</dd>
<dt>
<code>base</code>:</dt>
<dd>
<p>numeric scalar specifying the logarithmic scale</p>
</dd>
<dt>
<code>components</code>:</dt>
<dd>
<p>list specifying the parameters of the
underlying distribution</p>
</dd>
</dl>
<h3>Extends</h3>

<p>Class <code>Engine</code>, directly.
</p>


<h3>Methods</h3>


<dl>
<dt>rand(object, n, ...)</dt>
<dd>
<p>Generates nrow(EngineWithActivity)*n matrix
representing gene expressions of <code>n</code> samples, and the
transcriptionally inactive components are masked by <code>0</code>.</p>
</dd>
<dt>summary(object, ...)</dt>
<dd>
<p>Prints out the total number of
components and the number of active components in the object
of <code>EngineWithActivity</code>.</p>
</dd>
</dl>
<h3>Author(s)</h3>

<p>Kevin R. Coombes <a href="mailto:krc@silicovore.com">krc@silicovore.com</a>,
Jiexin Zhang <a href="mailto:jiexinzhang@mdanderson.org">jiexinzhang@mdanderson.org</a>,
</p>


<h3>Examples</h3>

<pre><code class="language-R">showClass("EngineWithActivity")
nComponents &lt;- 10
nGenes &lt;- 100
active &lt;- 0.7
comp &lt;- list()
for (i in 1:nComponents) {
  comp[[i]] &lt;- IndependentNormal(rnorm(nGenes/nComponents, 6, 1.5),
                                 1/rgamma(nGenes/nComponents, 44, 28))
}
myEngine &lt;- EngineWithActivity(active, comp, 2)
summary(myEngine)
myData &lt;- rand(myEngine, 5)
dim(myData)
</code></pre>


</div>